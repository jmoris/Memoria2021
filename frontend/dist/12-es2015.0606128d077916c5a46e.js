(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{VVaf:function(e,t,r){"use strict";r.r(t);var i=r("ofXK"),o=r("tyNb"),c=r("rXAn"),a=r("3Pt+"),n=r("pW6c"),s=r("SxV6"),l=r("fXoL");const d=function(){return{y:"120px",opacity:"0",delay:"100ms",duration:"400ms"}},u=function(e){return{value:"*",params:e}};let m=(()=>{class e{constructor(e,t,r){this.fb=e,this.auth=t,this.router=r,this.check=!0}ngOnInit(){this.router.events.subscribe(e=>{(e instanceof o.g||e instanceof o.e)&&(this.loadingText="Cargando modulos...",this.loading=!0),(e instanceof o.f||e instanceof o.d)&&(this.loading=!1)}),this.signinForm=this.fb.group({rut:["",[a.z.required,a.z.pattern(/^\d{1,2}\d{3}\d{3}[-][0-9kK]{1}$/),this.checkVerificatorDigit]],enrollment:["",a.z.required],password:["",a.z.required]})}checkVerificatorDigit(e){if(""==e.value)return null;var t=e.value.replace(".","");let r=(t=t.replace("-","")).slice(0,-1),i=t.slice(-1).toUpperCase(),o=0,c=2;for(let a=1;a<=r.length;a++)o+=c*t.charAt(r.length-a),c<7?c+=1:c=2;return i="K"==i?10:i,i=0==i?11:i,11-o%11!=i?{verificator:!0}:void 0}checkRun(){let e=this.signinForm.get("rut");var t=e.value.replace(".","");let r=(t=t.replace("-","")).slice(0,-1),i=t.slice(-1).toUpperCase();e.setValue(r+"-"+i)}updateInfo(){this.loading=!0,this.loadingText="Conectando...";let e=this.signinForm.value;this.auth.updateInfo(e.rut,e.enrollment,e.password).pipe(Object(s.a)()).subscribe(e=>{e.success?(this.auth.logout(),this.router.navigateByUrl("/dashboard/v1")):(this.msgError=e.message,this.check=!1,this.loading=!1)},e=>{"Unknown Error"===e&&(this.msgError="No se puede conectar al servidor.",this.check=!1,this.loading=!1),this.msgError=e.message,this.check=!1,this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.f),l.Zb(n.a),l.Zb(o.h))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-signup"]],decls:33,vars:5,consts:[[1,"card","o-hidden"],[1,"row"],[1,"col-md-6","text-center",2,"background-size","cover","background-image","url(./assets/images/photo-long-3.jpg)"],[1,"pl-3","auth-right"],[1,"auth-logo","text-center","mt-4"],["src","assets/images/logoghtracker.png","alt",""],[1,"flex-grow-2"],[1,"w-100","mb-4",2,"text-align","center","width","100%"],[1,"flex-grow-1"],[1,"col-md-6"],[1,"p-4"],[1,"mb-3","text-18"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","rut"],["id","rut","formControlName","rut","placeholder","11111111-1","type","text",1,"form-control","form-control-rounded",3,"input"],["for","matricula"],["id","matricula","formControlName","enrollment","type","text",1,"form-control","form-control-rounded"],["for","password"],["id","password","formControlName","password","type","password",1,"form-control","form-control-rounded"],[1,"btn","btn-primary","btn-block","btn-rounded","mt-3"]],template:function(e,t){1&e&&(l.fc(0,"div",0),l.fc(1,"div",1),l.fc(2,"div",2),l.fc(3,"div",3),l.fc(4,"div",4),l.ac(5,"img",5),l.ec(),l.ac(6,"div",6),l.fc(7,"div",7),l.fc(8,"h3"),l.fc(9,"b"),l.Zc(10,"Gracias por utilizar Github Tracker"),l.ec(),l.ec(),l.fc(11,"p"),l.Zc(12,"Para continuar necesitaremos algunos datos"),l.ec(),l.ec(),l.ac(13,"div",8),l.ec(),l.ec(),l.fc(14,"div",9),l.fc(15,"div",10),l.fc(16,"h1",11),l.Zc(17,"Completa tu Usuario"),l.ec(),l.fc(18,"form",12),l.rc("ngSubmit",(function(){return t.updateInfo()})),l.fc(19,"div",13),l.fc(20,"label",14),l.Zc(21,"RUT"),l.ec(),l.fc(22,"input",15),l.rc("input",(function(){return t.checkRun()})),l.ec(),l.ec(),l.fc(23,"div",13),l.fc(24,"label",16),l.Zc(25,"N\xfamero de Matr\xedcula"),l.ec(),l.ac(26,"input",17),l.ec(),l.fc(27,"div",13),l.fc(28,"label",18),l.Zc(29,"Nueva Contrase\xf1a"),l.ec(),l.ac(30,"input",19),l.ec(),l.fc(31,"button",20),l.Zc(32,"Actualizar informaci\xf3n"),l.ec(),l.ec(),l.ec(),l.ec(),l.ec(),l.ec()),2&e&&(l.Bc("@animate",l.Fc(3,u,l.Ec(2,d))),l.Lb(18),l.Bc("formGroup",t.signinForm))},directives:[a.B,a.s,a.k,a.d,a.r,a.i],styles:[""],data:{animation:[c.a]}}),e})();var f=r("3Lqu");let h=(()=>{class e{constructor(e,t,r,i){this.fb=e,this.auth=t,this.router=r,this.instService=i,this.check=!0}ngOnInit(){setTimeout((function(){location.href="http://localhost:8000"}),2e3),this.router.events.subscribe(e=>{(e instanceof o.g||e instanceof o.e)&&(this.loadingText="Cargando modulos...",this.loading=!0),(e instanceof o.f||e instanceof o.d)&&(this.loading=!1)}),this.signinForm=this.fb.group({institucion:["",a.z.required],email:["",a.z.required],password:["",a.z.required]}),this.instService.getAll().subscribe(e=>{this.instituciones=e})}signin(){this.loading=!0,this.loadingText="Conectando...";let e=this.signinForm.value;this.auth.login(e.institucion,e.email,e.password).pipe(Object(s.a)()).subscribe(e=>{if(console.log(this.auth.currentUserValue),console.log("afsadf"),e.success){const e=this.auth.currentUserValue;"1-9"==e.rut&&this.router.navigate(["/session/fill/"+e.id]),"Administrador"==e.role?this.router.navigate(["/dashboard/v1"]).then(()=>{window.location.reload()}):"Alumno"==e.role?this.router.navigate(["/dashboard/v2"]).then(()=>{window.location.reload()}):"Profesor"==e.role?this.router.navigate(["/dashboard/v4"]).then(()=>{window.location.reload()}):"Superadministrador"==e.role&&this.router.navigate(["/dashboard/admin"]).then(()=>{window.location.reload()})}else this.msgError=e.message,this.check=!1,this.loading=!1},e=>{"Unknown Error"===e&&(this.msgError="No se puede conectar al servidor.",this.check=!1,this.loading=!1),this.msgError=e.message,this.check=!1,this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.f),l.Zb(n.a),l.Zb(o.h),l.Zb(f.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-signin"]],decls:5,vars:0,consts:[[2,"text-align","center"],[2,"width","40vw","background-color","white","border","1px solid gainnsboro"],[1,"spinner","spinner-bubble","spinner-bubble-primary","mr-3"]],template:function(e,t){1&e&&(l.fc(0,"div",0),l.fc(1,"div",1),l.ac(2,"div",2),l.fc(3,"h3"),l.Zc(4,"Redirigiendo al centro de aplicaciones..."),l.ec(),l.ec(),l.ec())},styles:[""],data:{animation:[c.a]}}),e})();const p=function(){return{y:"120px",opacity:"0",delay:"100ms",duration:"400ms"}},g=function(e){return{value:"*",params:e}};let b=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Tb({type:e,selectors:[["app-forgot"]],decls:33,vars:4,consts:[[1,"card","o-hidden"],[1,"row"],[1,"col-md-6"],[1,"p-4"],[1,"auth-logo","text-center","mb-4"],["src","assets/images/logoghtracker.png","alt",""],[1,"mb-3","text-18"],["action",""],[1,"form-group"],["for","email"],["id","email","type","email",1,"form-control","form-control-rounded"],[1,"btn","btn-primary","btn-block","btn-rounded","mt-3"],[1,"mt-3","text-center"],["href","","routerLink","/sessions/signin",1,"text-muted"],[1,"col-md-6","text-center",2,"background-size","cover","background-image","url(./assets/images/pass_olvidada.png)"],[1,"pr-3","auth-right"],["href","mailto:Github Tracker_password@info.universidad.cl"]],template:function(e,t){1&e&&(l.fc(0,"div",0),l.fc(1,"div",1),l.fc(2,"div",2),l.fc(3,"div",3),l.fc(4,"div",4),l.ac(5,"img",5),l.ec(),l.fc(6,"h1",6),l.Zc(7,"Olvid\xe9 mi Contrase\xf1a"),l.ec(),l.fc(8,"form",7),l.fc(9,"div",8),l.fc(10,"label",9),l.Zc(11,"Correo Electr\xf3nico"),l.ec(),l.ac(12,"input",10),l.ec(),l.fc(13,"button",11),l.Zc(14,"Reiniciar mi Contrase\xf1a"),l.ec(),l.ec(),l.fc(15,"div",12),l.fc(16,"a",13),l.fc(17,"u"),l.Zc(18,"Volver Atr\xe1s"),l.ec(),l.ec(),l.ec(),l.ec(),l.ec(),l.fc(19,"div",14),l.fc(20,"div",15),l.fc(21,"h3"),l.fc(22,"b"),l.Zc(23,"\xbfNo puede restablecer la contrase\xf1a?"),l.ec(),l.ec(),l.fc(24,"h4"),l.fc(25,"small"),l.Zc(26,"P\xf3ngase en Contacto con Nosotros"),l.ec(),l.ec(),l.fc(27,"p"),l.fc(28,"b"),l.Zc(29,"Contacto para Recuperaci\xf3n:"),l.ec(),l.ac(30,"br"),l.fc(31,"a",16),l.Zc(32,"Github Tracker_password@info.universidad.cl"),l.ec(),l.ec(),l.ec(),l.ec(),l.ec(),l.ec()),2&e&&l.Bc("@animate",l.Fc(2,g,l.Ec(1,p)))},directives:[a.B,a.s,a.t,o.k],styles:[""],data:{animation:[c.a]}}),e})();var v=r("8I8D"),w=r("kmnG"),k=r("qFsG"),y=r("NFeN"),x=r("bTqV");const Z=function(){return{y:"120px",opacity:"0",delay:"100ms",duration:"400ms"}},C=function(e){return{value:"*",params:e}},N=function(){return{y:"120px",opacity:"0",delay:"100ms",duration:"400ms"}},z=function(e){return{value:"*",params:e}},I=[{path:"signup",component:m},{path:"signin",component:h},{path:"forgot",component:b},{path:"fill",component:(()=>{class e{constructor(e,t,r,i,o){this.fb=e,this.auth=t,this.router=r,this.route=i,this.userService=o,this.check=!0,this.hide=!0,this.form=this.fb.group({name:["",a.z.required],lastname:["",a.z.required],email:["",a.z.required],password:[""],rut:["",[a.z.required,a.z.pattern(/^\d{1,2}\d{3}\d{3}[-][0-9kK]{1}$/),this.checkVerificatorDigit]],enrollment:[""],role:[""],gh_user:["",a.z.required],gh_token:["",a.z.required]}),this.id=this.auth.currentUserValue.user.id,this.getUserData()}getUserData(){this.loading=!0,this.userService.getUserById(this.id).subscribe({next:e=>{console.log(e),this.user=e,this.form.get("name").setValue(e.name),this.form.get("lastname").setValue(e.lastname),this.form.get("email").setValue(e.email),this.form.get("password").setValue(""),this.form.get("enrollment").setValue(e.enrollment),this.form.get("role").setValue(e.pivot.role_id.toString()),this.loading=!1},error:e=>{console.log(e)}})}guardarInformacion(){this.form.invalid?Object.values(this.form.controls).forEach(e=>{e.markAsTouched()}):this.userService.updateUser(this.id,this.form.value).subscribe({next:e=>{console.log(e),localStorage.clear(),this.auth.logout()},error:e=>{console.log(e)}})}ngOnInit(){}checkVerificatorDigit(e){if(""==e.value)return null;var t=e.value.replace(".","");let r=(t=t.replace("-","")).slice(0,-1),i=t.slice(-1).toUpperCase(),o=0,c=2;for(let a=1;a<=r.length;a++)o+=c*t.charAt(r.length-a),c<7?c+=1:c=2;return i="K"==i?10:i,i=0==i?11:i,11-o%11!=i?{verificator:!0}:void 0}checkRun(){let e=this.form.get("rut");var t=e.value.replace(".","");let r=(t=t.replace("-","")).slice(0,-1),i=t.slice(-1).toUpperCase();e.setValue(r+"-"+i)}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.f),l.Zb(n.a),l.Zb(o.h),l.Zb(o.a),l.Zb(v.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-fill"]],decls:59,vars:8,consts:[[1,"card","o-hidden"],[1,"row"],[1,"col-md-12"],[1,"p-4"],[1,"auth-logo","text-center","mb-4"],["src","assets/images/logoghtracker.png","alt",""],[1,"mb-3","text-18"],[3,"formGroup"],[1,"form-div"],["appearance","standard",1,"input"],["matInput","","placeholder","11111111-1","formControlName","rut","maxlength","10",3,"input"],["matInput","","placeholder","","formControlName","name","maxlength","30"],["matInput","","placeholder","","formControlName","lastname","maxlength","30"],["matInput","","placeholder","","formControlName","enrollment","maxlength","15"],[1,"container"],["appearance","standard"],["matInput","","placeholder","ejemplo@dominio.cl","formControlName","email","maxlength","50"],["matInput","","placeholder","","formControlName","gh_user","maxlength","30"],["matInput","","placeholder","","formControlName","gh_token"],["matInput","","placeholder"," Ingrese su contrase\xf1a","formControlName","password","maxlength","30",3,"type"],["matSuffix","",3,"click"],[1,"mt-3","text-center"],["mat-raised-button","",1,"btn","btn-primary","btn-rounded",3,"disabled","click"]],template:function(e,t){1&e&&(l.fc(0,"div",0),l.fc(1,"div",1),l.fc(2,"div",2),l.fc(3,"div",3),l.fc(4,"div",4),l.ac(5,"img",5),l.ec(),l.fc(6,"h1",6),l.Zc(7,"Completa tu informaci\xf3n"),l.ec(),l.fc(8,"form",7),l.fc(9,"div",8),l.fc(10,"mat-form-field",9),l.fc(11,"mat-label"),l.Zc(12,"R.U.N"),l.ec(),l.fc(13,"input",10),l.rc("input",(function(){return t.checkRun()})),l.ec(),l.ac(14,"mat-hint"),l.ec(),l.fc(15,"mat-form-field",9),l.fc(16,"mat-label"),l.Zc(17,"Nombre"),l.ec(),l.ac(18,"input",11),l.ac(19,"mat-hint"),l.ec(),l.ec(),l.fc(20,"div",8),l.fc(21,"mat-form-field",9),l.fc(22,"mat-label"),l.Zc(23,"Apellido"),l.ec(),l.ac(24,"input",12),l.ac(25,"mat-hint"),l.ec(),l.fc(26,"mat-form-field",9),l.fc(27,"mat-label"),l.Zc(28,"Matr\xedcula"),l.ec(),l.ac(29,"input",13),l.ac(30,"mat-hint"),l.ec(),l.ec(),l.fc(31,"div",14),l.fc(32,"mat-form-field",15),l.fc(33,"mat-label"),l.Zc(34,"Correo electr\xf3nico"),l.ec(),l.ac(35,"input",16),l.ac(36,"mat-hint"),l.ec(),l.ec(),l.fc(37,"div",8),l.fc(38,"mat-form-field",9),l.fc(39,"mat-label"),l.Zc(40,"Usuario GitHub"),l.ec(),l.ac(41,"input",17),l.ac(42,"mat-hint"),l.ec(),l.fc(43,"mat-form-field",9),l.fc(44,"mat-label"),l.Zc(45,"Token GitHub"),l.ec(),l.ac(46,"input",18),l.ac(47,"mat-hint"),l.ec(),l.ec(),l.fc(48,"div",14),l.fc(49,"mat-form-field",15),l.fc(50,"mat-label"),l.Zc(51,"Contrase\xf1a"),l.ec(),l.ac(52,"input",19),l.fc(53,"mat-icon",20),l.rc("click",(function(){return t.hide=!t.hide})),l.Zc(54),l.ec(),l.ac(55,"mat-hint"),l.ec(),l.ec(),l.ec(),l.fc(56,"div",21),l.fc(57,"button",22),l.rc("click",(function(){return t.guardarInformacion()})),l.Zc(58,"Guardar"),l.ec(),l.ec(),l.ec(),l.ec(),l.ec(),l.ec()),2&e&&(l.Bc("@animate",l.Fc(6,C,l.Ec(5,Z))),l.Lb(8),l.Bc("formGroup",t.form),l.Lb(44),l.Bc("type",t.hide?"password":"text"),l.Lb(2),l.ad(t.hide?"visibility_off":"visibility"),l.Lb(3),l.Bc("disabled",t.form.invalid))},directives:[a.B,a.s,a.k,w.c,w.g,k.b,a.d,a.r,a.i,a.m,w.f,y.a,w.h,x.a],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.form-div[_ngcontent-%COMP%]{display:flex;flex-direction:row}.form-div[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]{padding-left:15px}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}"],data:{animation:[c.a]}}),e})()},{path:"oauth2/signin",component:(()=>{class e{constructor(e,t,r,i,o){this.fb=e,this.auth=t,this.router=r,this.route=i,this.instService=o,this.check=!0}ngOnInit(){this.loading=!0,this.router.events.subscribe(e=>{(e instanceof o.g||e instanceof o.e)&&(this.loadingText="Cargando modulos...",this.loading=!0),(e instanceof o.f||e instanceof o.d)&&(this.loading=!1)}),this.signinForm=this.fb.group({institucion:["",a.z.required],email:["",a.z.required],password:["",a.z.required]}),this.instService.getAll().subscribe(e=>{this.instituciones=e}),this.route.queryParams.subscribe(e=>{console.log(JSON.parse(e.user));let t={success:e.success,token:e.token,role:e.role,user:JSON.parse(e.user),institucion:e.institucion,token_type:"Bearer"};this.auth.loginOauth2(t),t.success?"Administrador"==t.role?this.router.navigate(["/dashboard/v1"]).then(()=>{window.location.reload()}):"Alumno"==t.role?this.router.navigate(["/dashboard/v2"]).then(()=>{window.location.reload()}):"Profesor"==t.role?this.router.navigate(["/dashboard/v4"]).then(()=>{window.location.reload()}):"Superadministrador"==t.role&&this.router.navigate(["/dashboard/admin"]).then(()=>{window.location.reload()}):(this.msgError=t.message,this.check=!1,this.loading=!1)},e=>{"Unknown Error"===e&&(this.msgError="No se puede conectar al servidor.",this.check=!1,this.loading=!1),this.msgError=e.message,this.check=!1,this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(l.Zb(a.f),l.Zb(n.a),l.Zb(o.h),l.Zb(o.a),l.Zb(f.a))},e.\u0275cmp=l.Tb({type:e,selectors:[["app-oauth"]],decls:8,vars:4,consts:[[1,"card","o-hidden"],[1,"row"],[1,"col-md-12"],[1,"p-4"],[1,"auth-logo","text-center","mb-4"],["src","assets/images/logoghtracker.png","alt",""],[2,"font-size","2em"]],template:function(e,t){1&e&&(l.fc(0,"div",0),l.fc(1,"div",1),l.fc(2,"div",2),l.fc(3,"div",3),l.fc(4,"div",4),l.ac(5,"img",5),l.ec(),l.fc(6,"span",6),l.Zc(7,"Redireccionando al dashboard..."),l.ec(),l.ec(),l.ec(),l.ec(),l.ec()),2&e&&l.Bc("@animate",l.Fc(2,z,l.Ec(1,N)))},styles:[""],data:{animation:[c.a]}}),e})()}];let O=(()=>{class e{}return e.\u0275mod=l.Xb({type:e}),e.\u0275inj=l.Wb({factory:function(t){return new(t||e)},imports:[[o.l.forChild(I)],o.l]}),e})();var V=r("jgPy"),q=r("vvyD"),S=r("1kSV");r.d(t,"SessionsModule",(function(){return U}));let U=(()=>{class e{}return e.\u0275mod=l.Xb({type:e}),e.\u0275inj=l.Wb({factory:function(t){return new(t||e)},imports:[[i.c,a.l,a.x,V.a,O,S.j,q.a]]}),e})()}}]);